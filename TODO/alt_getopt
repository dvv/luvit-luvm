#!/usr/bin/env luvit

local alt_getopt = require "./alt_getopt.lua"

local long_opts = {
   verbose = "v",
   help    = "h",
   fake    = 0,
   len     = 1,
   output  = "o",
   set_value = "S",
   ["set-output"] = "o"
}

local ret
local optarg
local optind
opts,optind,optarg = alt_getopt.get_ordered_opts (process.argv, "hVvo:n:S:", long_opts)
for i,v in ipairs (opts) do
   if optarg [i] then
      p ("option `" .. v .. "': " .. optarg [i])
   else
      p ("option `" .. v .. "'")
   end
end

optarg,optind = alt_getopt.get_opts (process.argv, "hVvo:n:S:", long_opts)
for k,v in pairs (optarg) do
   p ("fin-option `" .. k .. "': " .. v .. "")
end

for i = optind,#process.argv do
   p (("ARGV [%s] = %s"):format(i, process.argv [i]))
end
